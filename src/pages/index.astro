---
import Base from '@/layouts/Base.astro';
import PropertyCard from '@/components/PropertyCard.astro';
import { properties } from '@/data/properties';

// Obtener solo propiedades destacadas
const featuredProperties = properties.filter(p => p.highlight);
---

<Base 
  title="Del Prado Inversión Inmobiliaria - Venta y Alquiler de Propiedades en Corrientes Capital"
  description="Encuentra tu hogar ideal en Corrientes Capital. Especialistas en venta y alquiler de casas, departamentos, locales comerciales y oficinas. Martillero Público Gastón del Prado M.P. N° 321."
  image="/images/delprado-header.jpg"
>
  <!-- Hero Section -->
  <section class="relative text-white overflow-hidden min-h-screen flex items-center">
    <!-- Background Image -->
    <div class="absolute inset-0 bg-cover bg-center bg-no-repeat" style="background-image: url('/images/delprado-header.jpg'); background-color: #f97316; background-attachment: fixed;"></div>
    
    <!-- Overlay con gradiente metálico más sutil -->
    <div class="absolute inset-0 bg-gradient-to-br from-orange-600/40 via-orange-700/30 to-gold-600/40"></div>
    
    <!-- Overlay adicional para mayor contraste -->
    <div class="absolute inset-0 bg-black/20"></div>
    
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
      <div class="absolute inset-0 bg-dot-pattern"></div>
    </div>
    
    <!-- Efectos de luz adicionales -->
    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent"></div>
    
    <div class="relative container-custom py-16 sm:py-20 lg:py-32 w-full">
      <div class="max-w-6xl mx-auto text-center px-4 sm:px-6">
        <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold mb-6 leading-tight text-white" style="text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8), 0 2px 4px rgba(0, 0, 0, 0.6);">
          Encuentra tu hogar ideal
        </h1>
        <p class="text-lg sm:text-xl md:text-2xl mb-8 sm:mb-12 text-white max-w-4xl mx-auto leading-relaxed" style="text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7), 0 1px 2px rgba(0, 0, 0, 0.5);">
          Especialistas en venta y alquiler de propiedades en Corrientes Capital
        </p>
        
        <!-- Botones de navegación -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center max-w-2xl mx-auto">
          <a href="/ventas" class="w-full sm:w-auto bg-white/95 backdrop-blur-sm text-orange-600 font-semibold py-4 px-8 rounded-xl shadow-metallic-orange hover:shadow-xl transition-all duration-300 flex items-center justify-center hover:bg-white hover-metallic-orange metallic-shine">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
            Ver Propiedades en Venta
          </a>
          <a href="/alquileres" class="w-full sm:w-auto bg-white/95 backdrop-blur-sm text-gold-600 font-semibold py-4 px-8 rounded-xl shadow-metallic-gold hover:shadow-xl transition-all duration-300 flex items-center justify-center hover:bg-white hover-metallic-gold metallic-shine">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
            </svg>
            Ver Propiedades en Alquiler
          </a>
        </div>
      </div>
      
      <!-- Flecha indicadora de scroll -->
      <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce-slow z-50">
        <div class="flex flex-col items-center text-white/90 hover:text-white transition-all duration-300 cursor-pointer group">
          <span class="text-sm font-medium mb-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/20 px-3 py-1 rounded-full backdrop-blur-sm">Desplázate hacia abajo</span>
          <div class="relative">
            <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center group-hover:bg-white/30 transition-all duration-300 animate-pulse-glow">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Propiedades destacadas - Layout de dos columnas -->
  <section class="py-16 bg-gradient-to-br from-slate-50 via-white to-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <div class="grid grid-cols-1 lg:grid-cols-[35%_65%] gap-8 items-center">
        
        <!-- Columna izquierda - Texto -->
        <div class="flex flex-col justify-start h-[500px] pt-0">
          <div class="space-y-6">
            <div class="inline-flex items-center px-6 py-3 rounded-full bg-gradient-to-r from-orange-50 to-gold-50 border border-orange-200/50">
              <div class="w-3 h-3 rounded-full bg-gradient-to-r from-orange-500 to-gold-500 mr-4 animate-pulse"></div>
              <span class="text-sm font-semibold text-gray-700 uppercase tracking-wider">Propiedades Destacadas</span>
            </div>
            
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 leading-tight">
              <span class="bg-gradient-to-r from-orange-600 via-gold-600 to-orange-600 bg-clip-text text-transparent">
                Encuentra
              </span>
              <br>
              <span class="text-gray-900">Oportunidades</span>
            </h2>
            
            <p class="text-lg sm:text-xl text-gray-600 leading-relaxed max-w-lg">
              Descubre propiedades cuidadosamente seleccionadas que combinan ubicación privilegiada, calidad excepcional y valor único en el mercado inmobiliario de Corrientes.
            </p>
          </div>
          
          <div class="mt-auto">
            <a href="/ventas" class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
              </svg>
              Explorar Propiedades
            </a>
          </div>
        </div>
        
        <!-- Columna derecha - Slider -->
        <div class="relative w-full flex flex-col justify-between h-[500px]">
          <!-- Contenedor del slider -->
          <div class="relative h-[400px] w-full">
            <!-- Cards de propiedades -->
            <div class="flex justify-center space-x-3 h-full items-center transition-all duration-300 ease-in-out" id="slider-container">
              {featuredProperties.slice(0, 3).map((property, index) => (
                <div class="flex-shrink-0">
                  <a href={`/propiedad/${property.slug}`} class="block group">
                    <div class="relative w-72 h-96 rounded-2xl overflow-hidden shadow-lg bg-white hover:shadow-xl transition-all duration-300">
                      <!-- Imagen -->
                      <div class="relative h-full">
                        <img 
                          src={property.images[0]} 
                          alt={property.title}
                          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                        />
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                        
                        <!-- Información en la parte inferior -->
                        <div class="absolute bottom-0 left-0 right-0 p-6">
                          <h3 class="text-2xl font-bold text-white mb-1">
                            {property.title.split(' ')[0]}
                          </h3>
                          <div class="flex items-center space-x-2 text-white/90">
                            <svg class="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                            </svg>
                            <span class="text-sm font-medium uppercase tracking-wider">
                              {property.neighborhood || property.city}
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
              ))}
            </div>
          </div>
          
          <!-- Navegación inferior -->
          <div class="flex items-center justify-between px-4">
            <div class="text-sm text-gray-600 font-medium uppercase tracking-wider">
              Propiedades Destacadas
            </div>
            
            <div class="flex items-center space-x-4">
              <!-- Contador de páginas -->
              <div class="text-sm text-gray-600">
                <span id="current-page">01</span> / <span id="total-pages">02</span>
              </div>
              
              <!-- Botones de navegación -->
              <div class="flex space-x-2">
                <button 
                  id="prev-btn" 
                  class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors flex items-center justify-center"
                  onclick="previousSlide()"
                >
                  <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                  </svg>
                </button>
                
                <button 
                  id="next-btn" 
                  class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors flex items-center justify-center"
                  onclick="nextSlide()"
                >
                  <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Navegación elegante con imágenes -->
  <section class="relative h-screen flex">
    <!-- Venta -->
    <a href="/ventas" class="relative w-1/2 group overflow-hidden">
      <div class="absolute inset-0 bg-cover bg-center bg-no-repeat" style="background-image: url('/images/venta.jpg');"></div>
      <div class="absolute inset-0 bg-gradient-to-br from-black/60 via-black/40 to-black/60 group-hover:from-black/50 group-hover:via-black/30 group-hover:to-black/50 transition-all duration-500"></div>
      <div class="relative h-full flex flex-col justify-center items-center text-white p-8">
        <div class="text-center">
          <h2 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 tracking-wide" style="text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);">Venta</h2>
          <p class="text-lg sm:text-xl md:text-2xl mb-8 opacity-90" style="text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7);">Encuentra tu hogar ideal</p>
          <div class="inline-flex items-center text-white/90 group-hover:text-white transition-colors duration-300">
            <span class="text-sm sm:text-base font-medium tracking-wider uppercase">Explorar</span>
            <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
        </div>
      </div>
    </a>
    
    <!-- Alquiler -->
    <a href="/alquileres" class="relative w-1/2 group overflow-hidden">
      <div class="absolute inset-0 bg-cover bg-center bg-no-repeat" style="background-image: url('/images/alquiler.jpg');"></div>
      <div class="absolute inset-0 bg-gradient-to-br from-black/60 via-black/40 to-black/60 group-hover:from-black/50 group-hover:via-black/30 group-hover:to-black/50 transition-all duration-500"></div>
      <div class="relative h-full flex flex-col justify-center items-center text-white p-8">
        <div class="text-center">
          <h2 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-4 tracking-wide" style="text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);">Alquiler</h2>
          <p class="text-lg sm:text-xl md:text-2xl mb-8 opacity-90" style="text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7);">Descubre tu próximo hogar</p>
          <div class="inline-flex items-center text-white/90 group-hover:text-white transition-colors duration-300">
            <span class="text-sm sm:text-base font-medium tracking-wider uppercase">Explorar</span>
            <svg class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </div>
        </div>
      </div>
    </a>
  </section>

  <!-- CTA Section -->
  <section class="py-12 sm:py-16 lg:py-20 bg-gradient-to-br from-gray-50 to-white">
    <div class="container-custom px-4 sm:px-6">
      <div class="relative rounded-2xl sm:rounded-3xl p-8 sm:p-12 md:p-16 text-center text-white shadow-2xl overflow-hidden">
        <!-- Background Image -->
        <div class="absolute inset-0 bg-cover bg-top bg-no-repeat" style="background-image: url('/images/vender.jpg');"></div>
        
        <!-- Overlay con gradiente metálico -->
        <div class="absolute inset-0 bg-gradient-to-br from-orange-600/70 via-orange-700/60 to-gold-600/70"></div>
        
        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-20">
          <div class="absolute inset-0 bg-dot-pattern"></div>
        </div>
        
        <!-- Efectos de luz adicionales -->
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
        
        <div class="relative">
          <div class="inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-white/20 backdrop-blur-sm rounded-full mb-6 shadow-lg">
            <svg class="w-8 h-8 sm:w-10 sm:h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
          </div>
          <h2 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-4 sm:mb-6 leading-tight text-white drop-shadow-2xl">
            ¿Tienes una propiedad para vender o alquilar?
          </h2>
          <p class="text-base sm:text-lg md:text-xl lg:text-2xl mb-6 sm:mb-8 lg:mb-10 text-white/90 max-w-4xl mx-auto leading-relaxed drop-shadow-lg">
            Nuestro equipo de expertos te ayudará a encontrar el comprador o inquilino perfecto
          </p>
          <a href="/contacto" class="inline-flex items-center justify-center px-6 sm:px-8 lg:px-10 py-3 sm:py-4 bg-white/95 backdrop-blur-sm text-orange-600 font-semibold rounded-xl shadow-metallic-orange hover:shadow-xl hover:bg-white transition-all duration-300 text-base sm:text-lg metallic-shine hover-metallic-orange">
            Contactar ahora
            <svg class="w-5 h-5 sm:w-6 sm:h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>
</Base>

<script id="properties-data" type="application/json" set:html={JSON.stringify(featuredProperties)}></script>

<script>
  // Hacer scroll suave cuando se hace clic en la flecha
  document.addEventListener('DOMContentLoaded', function() {
    const scrollArrow = document.querySelector('.animate-bounce-slow');
    
    if (scrollArrow) {
      scrollArrow.addEventListener('click', function() {
        window.scrollTo({
          top: window.innerHeight,
          behavior: 'smooth'
        });
      });
    }
  });

  // Funcionalidad del slider simple
  let currentPage = 0;
  let totalPages = 2; // Se calculará dinámicamente
  
  function updateSlider() {
    const container = document.getElementById('slider-container');
    const currentPageElement = document.getElementById('current-page');
    const totalPagesElement = document.getElementById('total-pages');
    
    // Obtener las propiedades destacadas del JSON
    const propertiesData = document.getElementById('properties-data');
    let properties = [];
    
    if (propertiesData && propertiesData.textContent) {
      try {
        properties = JSON.parse(propertiesData.textContent);
      } catch (e) {
        console.error('Error parsing properties data:', e);
        properties = []; // Fallback a array vacío
      }
    }
    
    // Calcular totalPages dinámicamente
    if (properties.length > 0) {
      totalPages = Math.ceil(properties.length / 3);
    } else {
      totalPages = 1; // Fallback a 1 página si no hay propiedades
    }
    
    // Actualizar el contenido del slider
    if (container && properties.length > 0) {
      // Aplicar efecto de fade out
      container.style.opacity = '0.3';
      container.style.transform = 'scale(0.95)';
      
      // Después de un breve delay, cambiar contenido y hacer fade in
      setTimeout(() => {
        const startIndex = currentPage * 3;
        const endIndex = startIndex + 3;
        const currentProperties = properties.slice(startIndex, endIndex);
        
        container.innerHTML = currentProperties.map((property: any) => {
          const operationText = property.operation === 'venta' ? 'VENTA' : 'ALQUILER';
          const operationColor = property.operation === 'venta' ? 'from-orange-500 to-orange-600' : 'from-green-500 to-green-600';
          const priceText = property.currency === 'USD' ? `USD ${property.price.toLocaleString()}` : `$${property.price.toLocaleString()}`;
          
          return `
          <div class="flex-shrink-0">
            <a href="/propiedad/${property.slug}" class="block group">
              <div class="relative w-72 h-96 rounded-2xl overflow-hidden shadow-lg bg-white hover:shadow-xl transition-all duration-300">
                <div class="relative h-full">
                  <img
                    src="${property.images[0]}"
                    alt="${property.title}"
                    class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                  
                  <div class="absolute bottom-0 left-0 right-0 p-6">
                    <div class="mb-2">
                      <div class="flex items-center space-x-3 mb-1">
                        <div class="text-2xl font-bold text-white">
                          ${priceText}
                        </div>
                        <div class="bg-gradient-to-r ${operationColor} text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">
                          ${operationText}
                        </div>
                      </div>
                      <h3 class="text-lg font-semibold text-white/90 mb-2">
                        ${property.title.split(' ')[0]}
                      </h3>
                    </div>
                    <div class="flex items-center space-x-2 text-white/90">
                      <svg class="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                      </svg>
                      <span class="text-sm font-medium uppercase tracking-wider">
                        ${property.neighborhood || property.city}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </a>
          </div>
        `;
        }).join('');
        
        // Fade in con efecto de escala
        container.style.opacity = '1';
        container.style.transform = 'scale(1)';
      }, 200);
    }
    
    // Actualizar la navegación
    if (currentPageElement) {
      currentPageElement.textContent = String(currentPage + 1).padStart(2, '0');
    }
    
    if (totalPagesElement) {
      totalPagesElement.textContent = String(totalPages).padStart(2, '0');
    }
  }
  
  function nextSlide() {
    if (totalPages > 1) {
      currentPage = (currentPage + 1) % totalPages;
      updateSlider();
    }
  }
  
  function previousSlide() {
    if (totalPages > 1) {
      currentPage = currentPage === 0 ? totalPages - 1 : currentPage - 1;
      updateSlider();
    }
  }
  
  // Inicializar el slider
  function initializeSlider() {
    updateSlider();
  }

  // Inicializar cuando el DOM esté listo
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeSlider);
  } else {
    initializeSlider();
  }
  
  // Hacer las funciones globales
  (window as any).nextSlide = nextSlide;
  (window as any).previousSlide = previousSlide;
</script>

